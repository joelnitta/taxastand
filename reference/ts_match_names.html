<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Match taxonomic names to a reference — ts_match_names • taxastand</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Match taxonomic names to a reference — ts_match_names"><meta property="og:description" content="Allows for orthographic differences between query and reference by using
fuzzy matching on parsed taxonomic names. Requires taxon-tools to be
installed."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">taxastand</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basics.html">The basics</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Match taxonomic names to a reference</h1>
    
    <div class="hidden name"><code>ts_match_names.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Allows for orthographic differences between query and reference by using
fuzzy matching on parsed taxonomic names. Requires <a href="https://github.com/camwebb/taxon-tools" class="external-link">taxon-tools</a> to be
installed.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">ts_match_names</span><span class="op">(</span>
  <span class="va">query</span>,
  <span class="va">reference</span>,
  max_dist <span class="op">=</span> <span class="fl">10</span>,
  match_no_auth <span class="op">=</span> <span class="cn">FALSE</span>,
  match_canon <span class="op">=</span> <span class="cn">FALSE</span>,
  collapse_infra <span class="op">=</span> <span class="cn">FALSE</span>,
  simple <span class="op">=</span> <span class="cn">FALSE</span>,
  tbl_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"ts_tbl_out"</span>, default <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>query</dt>
<dd><p>Character vector or dataframe; taxonomic names to be queried.
If a character vector, missing values not allowed and all values must be unique.
If a dataframe, should be taxonomic names parsed with <code><a href="ts_parse_names.html">ts_parse_names</a>()</code>.</p></dd>
<dt>reference</dt>
<dd><p>Character vector or dataframe; taxonomic names to use as reference.
If a character vector, missing values not allowed and all values must be unique.
If a dataframe, should be taxonomic names parsed with <code><a href="ts_parse_names.html">ts_parse_names</a>()</code>.</p></dd>
<dt>max_dist</dt>
<dd><p>Max Levenshtein distance to allow during fuzzy matching
(total insertions, deletions and substitutions). Default: 10.</p></dd>
<dt>match_no_auth</dt>
<dd><p>Logical; If no author is given in the query and the name (without author)
occurs only once in the reference, accept the name in the reference as a match.
Default: to not allow such a match (<code>FALSE</code>).</p></dd>
<dt>match_canon</dt>
<dd><p>Logical; Allow a "canonical name" match if only the genus, species epithet,
and infraspecific epithet (if present) match exactly. Default: to not allow such a match (<code>FALSE</code>).</p></dd>
<dt>collapse_infra</dt>
<dd><p>Logical; if the specific epithet and infraspecific epithet
are the same, drop the infraspecific rank and epithet from the query.</p></dd>
<dt>simple</dt>
<dd><p>Logical; return the output in a simplified format with only the query
name, matched reference name, and match type. Default: <code>FALSE</code>.</p></dd>
<dt>tbl_out</dt>
<dd><p>Logical vector of length 1; should a tibble be returned?
If <code>FALSE</code> (default), output will be a data.frame. This argument can
be controlled via the option <code>ts_tbl_out</code>; see Examples.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Dataframe with the following columns (if <code>simple</code> is <code>FALSE</code>):</p><ul><li><p>query: Query name</p></li>
<li><p>reference: Matched reference name</p></li>
<li><p>match_type: Type of match (for a summary of match types, <a href="https://github.com/camwebb/taxon-tools/blob/master/doc/matchnames.md#matching-rules-and-output-codes" class="external-link">see taxon-tools manual</a>)</p></li>
<li><p>id_query: Unique ID of query</p></li>
<li><p>id_ref: Unique ID of reference</p></li>
<li><p>genus_hybrid_sign_query: Genus hybrid sign in query</p></li>
<li><p>genus_name_query: Genus name of query</p></li>
<li><p>species_hybrid_sign_query: Species hybrid sign in query</p></li>
<li><p>specific_epithet_query: Specific epithet of query</p></li>
<li><p>infraspecific_rank_query: Infraspecific rank of query</p></li>
<li><p>infraspecific_epithet_query: Infraspecific epithet of query</p></li>
<li><p>author_query: Taxonomic author of query</p></li>
<li><p>genus_hybrid_sign_ref: Genus hybrid sign in reference</p></li>
<li><p>genus_name_ref: Genus name of reference</p></li>
<li><p>species_hybrid_sign_ref: Species hybrid sign in reference</p></li>
<li><p>specific_epithet_ref: Specific epithet of reference</p></li>
<li><p>infraspecific_rank_ref: Infraspecific rank of reference</p></li>
<li><p>infraspecific_epithet_ref: Infraspecific epithet of reference</p></li>
<li><p>author_ref: Taxonomic author of reference</p></li>
</ul><p>If <code>simple</code> is <code>TRUE</code>, only return the first three columns above.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>taxon-tools</code> matches names in two steps:</p><ol><li><p>Scientific names are parsed into their component parts (genus, species,
variety, author, etc).</p></li>
<li><p>Names are fuzzily matched following taxonomic rules using the component
parts.</p></li>
</ol><p>For more information on rules used for matching, <a href="https://github.com/camwebb/taxon-tools/blob/master/doc/matchnames.md#matching-rules-and-output-codes" class="external-link">see taxon-tools manual</a>.</p>
<p>Parsing is fairly fast (much faster than matching) but can take some time if
the number of names is very large. If multiple queries will be made (e.g., to
the same large reference database), it is recommended to first parse the
names using <code><a href="ts_parse_names.html">ts_parse_names</a>()</code>, and use the results as input to
<code>query</code> and/or <code>reference</code>.</p>
<p><code>collapse_infra</code> is useful in situations where the reference database does
not use names that have the same specific epithet and infraspecific epithet.
For example, reference name "Blechnum lunare" and query "Blechnum lunare var.
lunare". In this case, if <code>collapse_infra</code> is <code>TRUE</code>, "Blechnum lunare" will
be queried instead of "Blechnum lunare var. lunare". Note that the
<code>match_type</code> will be "exact" even though the literal query and the matched
name are different (see example below).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu">ts_match_names</span><span class="op">(</span></span>
<span class="r-in">  <span class="st">"Crepidomanes minutus"</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Crepidomanes minutum"</span>, <span class="st">"Hymenophyllum polyanthos"</span><span class="op">)</span>,</span>
<span class="r-in">  simple <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  query            reference match_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Crepidomanes minutus Crepidomanes minutum auto_fuzzy</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># If you always want tibble output without specifying `tbl_out = TRUE` every</span></span>
<span class="r-in"><span class="co"># time, set the option:</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>ts_tbl_out <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">ts_match_names</span><span class="op">(</span></span>
<span class="r-in">  <span class="st">"Crepidomanes minutus"</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Crepidomanes minutum"</span>, <span class="st">"Hymenophyllum polyanthos"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query   reference match_type id_query id_ref genus_hybrid_si… genus_name_query</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Crepid… Crepidom… auto_fuzzy c1ad73e… 2d68c… <span style="color: #BB0000;">NA</span>               Crepidomanes    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 12 more variables: species_hybrid_sign_query &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   specific_epithet_query &lt;chr&gt;, infraspecific_rank_query &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   infraspecific_epithet_query &lt;chr&gt;, author_query &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   genus_hybrid_sign_ref &lt;chr&gt;, genus_name_ref &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   species_hybrid_sign_ref &lt;chr&gt;, specific_epithet_ref &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   infraspecific_rank_ref &lt;chr&gt;, infraspecific_epithet_ref &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   author_ref &lt;chr&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Example using collapse_infra argument</span></span>
<span class="r-in"><span class="fu">ts_match_names</span><span class="op">(</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Crepidomanes minutus"</span>, <span class="st">"Blechnum lunare var. lunare"</span>, <span class="st">"Blechnum lunare"</span>,</span>
<span class="r-in">    <span class="st">"Bar foo var. foo"</span>, <span class="st">"Bar foo"</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Crepidomanes minutum"</span>, <span class="st">"Hymenophyllum polyanthos"</span>, <span class="st">"Blechnum lunare"</span>,</span>
<span class="r-in">    <span class="st">"Bar foo"</span><span class="op">)</span>,</span>
<span class="r-in">  collapse_infra <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query   reference match_type id_query id_ref genus_hybrid_si… genus_name_query</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Crepid… Crepidom… auto_fuzzy 982192f… 70fbc… <span style="color: #BB0000;">NA</span>               Crepidomanes    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Blechn… Blechnum… exact      982192f… 70fbc… <span style="color: #BB0000;">NA</span>               Blechnum        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Blechn… Blechnum… exact      982192f… 70fbc… <span style="color: #BB0000;">NA</span>               Blechnum        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Bar fo… Bar foo   exact      982192f… 70fbc… <span style="color: #BB0000;">NA</span>               Bar             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Bar foo Bar foo   exact      982192f… 70fbc… <span style="color: #BB0000;">NA</span>               Bar             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 12 more variables: species_hybrid_sign_query &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   specific_epithet_query &lt;chr&gt;, infraspecific_rank_query &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   infraspecific_epithet_query &lt;chr&gt;, author_query &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   genus_hybrid_sign_ref &lt;chr&gt;, genus_name_ref &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   species_hybrid_sign_ref &lt;chr&gt;, specific_epithet_ref &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   infraspecific_rank_ref &lt;chr&gt;, infraspecific_epithet_ref &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   author_ref &lt;chr&gt;</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joel Nitta.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

